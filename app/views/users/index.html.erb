<div ng-app='comsatrack'>
  <div ng-controller='UsersCtrl'>
    <% provide(:title, 'Monitors') %>
    <h1 class='hidden-xs'>Monitors</h1>
    <div class='visible-xs'><br><br><center><h4> Monitors </h4></center> </div>
    <div class='row'>
      <div class='col-md-3 col-xs-8'>
        <div class='input-group'>
          <input class='form-control' ng-model='search.last_name'
                 placeholder='Search Last Name' autocorrect='off'/>
          <span class='input-group-addon'>
            <span class='glyphicon glyphicon-search'></span>
          </span>
        </div>
      </div>
      <div class='col-md-7 col-xs-4'></div>
      <div class='col-md-2 col-xs-2'>
      <% if current_user.admin? %>
        <div class='btn-group'>
          <%= link_to 'Add Monitor', new_user_path,
            class: 'btn btn-primary', role: 'button' %>
        </div>
      <% end %>
    </div>
    <div class='hidden-xs'>
      <br><br>
    </div>
    <br>
    <table class='table table-hover' >
      <thead ng-show='(Users | filter:search).length > 0'>
        <tr>
          <th class='visible-xs'>
            <a href='' ng-click="predicate.value = 'last_name'; reverse=!reverse">
              Full Name</a>
          </th>
          <th class='hidden-xs'>
            <a href="" ng-click="predicate.value = 'last_name'; reverse=!reverse">
              Last Name</a>
          </th>
          <th class='hidden-xs'>First Name</th>
          <th class = 'hidden-xs'>Email</th>
          <th>Phone Number</th>
          <th class = 'hidden-xs'>Admin</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat='user in Users | orderBy:predicate.value:reverse |
                       filter:search'>
          <td class='visible-xs'>
            <a ng-href='/users/{{user.id}}'>
              {{user.last_name}},
               {{user.first_name}}
            </a>
          </td>
          <td class='hidden-xs'>
            <a ng-href='/users/{{user.id}}'>
              {{user.last_name}}
            </a>
          </td>
          <td class='hidden-xs'>{{user.first_name}}</td>
          <td class='hidden-xs'>{{user.email}}</td>
          <td class='hidden-xs'>{{user.phone_number}}</td>
          <td class='visible-xs'>
            <a ng-href='tel:{{user.phone_number}}'>{{user.phone_number}}</a>
          </td>
          <td class='hidden-xs'>{{user.admin | booleanToWords}}</td>
        </tr>
      </tbody>
    </table>
    <center>
      <div ng-show='(Users | filter:search).length == 0'>
        <hr>
        <h4>No results found</h4>
        <br>
        <btn class="btn btn-info" ng-click="search=''">Clear Search</btn>
      </div>
      <div ng-hide='(Users | filter:search).length == 0'>
        <hr><br>
      </div>
    </center>
  </div>
</div>
